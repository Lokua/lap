<!DOCTYPE html>
<html>
<head>
  <title>Lap Test Suite</title>
  <script src="../../dist/lap.js"></script>
  <script src="../../src/plugins/progress-bar.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div id="player">

    <div class="cover"><img class="lap-cover" src=""></div>

    <div class="left">

      <div class="lap-controls">
        <div class="wrap">
          <span class="lap-control lap-play-pause">play-pause</span>
          <span class="lap-read">buffered: <span class="read lap-buffered"></span></span>
          <div class="wrap canvas-wrap">
            <canvas class="lap-seekbar" width="256" height="12"></canvas>
          </div>
        </div>

        <div class="wrap">
          <span class="lap-control lap-prev">prev</span>
          <span class="lap-control lap-next">next</span>
          <span class="lap-read">track-number: <span class="read lap-track-number"></span></span>
        </div class="wrap">

        <div class="wrap">
          <span class="lap-control lap-seek-backward">seek-backward</span>
          <span class="lap-control lap-seek-forward">seek-forward</span>
          <span class="read lap-current-time"></span><b> | </b>
          <span class="read lap-duration"></span>
        </div>

        <div class="wrap">
          <span class="lap-control lap-volume-down">volume-down</span>
          <span class="lap-control lap-volume-up">volume-up</span>          
          <span class="lap-read">volume: <span class="read lap-volume-read"></span></span>
        </div>
      </div>

      <div class="wrap info">
        <div class="lap-read">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;artist: 
          <span class="read lap-artist"></span>
        </div>
        <div class="lap-read">album-title: <span class="read lap-album-title"></span></div>
        <div class="lap-read">track-title: <span class="read lap-track-title"></span></div>
      </div>

      <div class="lap-controls">
        <div class="wrap">
          <span class="lap-control lap-prev-album">prev-album</span>
          <span class="lap-control lap-next-album">next-album</span>
        </div>
      </div>

    </div>

    <div class="lap-playlist-panel"></div>

  </div>


  <div id="info">
    <h2>external</h2>
  </div>

<script>

window.onload = function() {

  var tooly = Lap.prototype.getTooly();

  var lib = '../lib.json';

  var lap = new Lap('#player', lib, {
    trace: false,
    debug: true, 
    elements: 'auto',
    startingAlbumIndex: 1,
    plugins: [
      { 
        ctor: Lap.ProgressBar, 

        args: ['canvas', {
          playhead: {
            width: 6, 
            height: 12,
            stroke: '#0080ff',
            fill: '#fff'
          },
          progress: { 
            fill: '#0080ff', 
            height: 10 
          },
          track: {
            fill: '#eae3e6',
            height: 10
          }
        }],

        name: 'progressBar'
      }
    ]
  });

  var progressBar = lap.plugins.progressBar;
  // console.log(progressBar);

  var info = tooly.select('#info');
  function append(key) {
    var what = lap.property(key);
    tooly.append(info, '<u>' + key +'</u><br>');
    for (var i = 0; i < what.length; i++) {
      tooly.append(info, key + '['+i+']: ' + what[i] + '<br>');
    }
    tooly.append(info, '<div class="hr">');
  }
  append('album');
  append('date');
  append('label');
  
}

</script>
</body>
</html>